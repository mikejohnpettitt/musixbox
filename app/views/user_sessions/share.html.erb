<%# app/views/play_sessions/share.html.erb %>
<% content_for :meta_title, "result" %>
<% content_for :meta_description, "description" %>
<div class="container" style="max-width: 375px; padding: 0 20px; margin: 0 auto;"
data-controller="camera">
  <%# ZONE CAMÃ‰RA (visible seulement pendant la capture) %>
  <div class="camera-area mb-4">
    <%# Ã‰lÃ©ment vidÃ©o pour afficher la camÃ©ra (cachÃ© au dÃ©but) %>
    <video data-camera-target="video"
      autoplay
      playsinline
      style="display: none; width: 100%; border-radius: 8px;">
    </video>
    <%# PrÃ©visualisation de la photo (cachÃ©e au dÃ©but) %>
    <img data-camera-target="preview" alt=""
      style="display: none; width: 100%; border-radius: 8px;">
  </div>

  <%# Canvas invisible pour capturer la photo %>
  <canvas data-camera-target="canvas" style="display: none;"></canvas>
  <%# Champ cachÃ© pour stocker la photo (optionnel) %>
  <input type="hidden" data-camera-target="photoInput" name="photo_data">

  <%# BOUTONS CAMÃ‰RA %>
  <div class="d-grid gap-2 mb-3">
    <%# Bouton DÃ©marrer la camÃ©ra %>
    <button type="button"
      class="btn btn-primary"
      data-action="click->camera#startCamera">
      ğŸ“· DÃ©marrer camÃ©ra
    </button>
    <%# Bouton Prendre photo (cachÃ© au dÃ©but) %>
    <button type="button"
      class="btn btn-success"
      style="display: none;"
      data-action="click->camera#capturePhoto">
      ğŸ“¸ Prendre photo
    </button>
    <%# Bouton Reprendre (cachÃ© au dÃ©but) %>
    <button type="button"
      class="btn btn-warning"
      style="display: none;"
      data-action="click->camera#retakePhoto">
      ğŸ”„ Reprendre
    </button>
  </div>

  <%# ZONE CARD (cachÃ©e au dÃ©but, visible aprÃ¨s photo) %>
  <div class="card-wrapper"
    style="width: 100%; margin: 0 auto; margin-bottom: 1rem; display: none;"
    data-camera-target="cardWrapper">
    <%= render "shared/card" %>
  </div>

  <%# BOUTONS ACTION (avec link_to) %>
  <div class="d-grid gap-2">
    <button type="button"
      class="btn btn-warning"
      data-action="click->camera#downloadPhoto">
      ğŸ’¾ Save to phone
    </button>
    <button type="button"
      class="btn btn-info"
      data-action="click->camera#shareToInstagram">
      ğŸ“¤ Share to Instagram
    </button>
  </div>
</div>
