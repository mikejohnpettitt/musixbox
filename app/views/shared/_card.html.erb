<div class="card-result text-center mt-5" style="position: relative; width: 100%; margin-bottom: 0;">
  <!-- Image de fond -->
  <img src="<%= asset_path('and_the_winner_is.png') %>" alt="photos" style="width: 100%; display: block; opacity: 0.7;">

  <!-- Ta photo prise (remplace le fond) -->
  <img id="userPhoto" data-camera-target="cardPhoto" alt="Votre photo"
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; display: none; border-radius: 8px;">

  <!-- Texte et overlay avec TES STATS -->
  <div style="position: absolute; bottom: 0; left: 0; right: 0; padding: 20px; color: #000; font-weight: bold; background: linear-gradient(to top, rgba(255, 200, 100, 0.8), rgba(255, 200, 100, 0));">

    <!-- Ajoute tes stats ici -->
    <% if @fastest_response %>
      <h4 class="mb-2">‚ö° Plus rapide : <%= @fastest_response.time_taken %>s</h4>
      <p class="mb-1"><small><%= @fastest_response.song.title %></small></p>
    <% end %>

    <% if @fastest_title %>
      <h4 class="mb-2">üéµ Titre rapide : <%= @fastest_title.time_taken %>s</h4>
      <p class="mb-1"><small>"<%= @fastest_title.user_answer_title %>"</small></p>
    <% end %>

    <div class="mt-3">
      <p class="mb-0">üé∏ MusixBox</p>
      <p class="mb-0"><small>musixbox.com</small></p>
    </div>

  </div>
<%# ============================================ %>
<%# SCRIPT : Charger la photo depuis localStorage %>
<%# ============================================ %>
<script>
  // Fonction qui charge la photo
  function loadUserPhoto() {
    console.log("Script de chargement photo ex√©cut√© !")
    
    // On r√©cup√®re la photo depuis localStorage
    const savedPhoto = localStorage.getItem("userSelfie")
    
    console.log("Photo trouv√©e:", savedPhoto ? "OUI" : "NON")
    
    // On r√©cup√®re les √©l√©ments HTML
    const userPhotoElement = document.getElementById("userPhoto")
    const backgroundImage = document.querySelector(".card-result > img:first-child")
    
    console.log("Element userPhoto:", userPhotoElement ? "OUI" : "NON")
    console.log("Element background:", backgroundImage ? "OUI" : "NON")
    
    // Si une photo existe dans localStorage
    if (savedPhoto && userPhotoElement) {
      
      // On met la photo sauvegard√©e dans l'√©l√©ment <img>
      userPhotoElement.src = savedPhoto
      
      // On affiche la photo de l'utilisateur
      userPhotoElement.style.display = "block"
      
      // On cache l'image de fond
      if (backgroundImage) {
        backgroundImage.style.opacity = "0"
      }
      
      console.log("Photo charg√©e avec succ√®s !")
      
    } else {
      console.log("Pas de photo ou √©l√©ment non trouv√©")
    }
  }
  
  // ============================================
  // IMPORTANT : √âcouter les DEUX √©v√©nements
  // ============================================
  // "DOMContentLoaded" = premier chargement de la page
  // "turbo:load" = navigation avec Turbo (Rails 7)
  
  document.addEventListener("DOMContentLoaded", loadUserPhoto)
  document.addEventListener("turbo:load", loadUserPhoto)
</script>
</div>
